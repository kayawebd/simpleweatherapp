let weather={apiKey:"d1d60e9fb085cd41f6a85061808d1369",fetchWeather:function(){if(document.querySelector(".searchBar").value){const SEARCH_CITY=document.querySelector(".searchBar").value,SEARCH_APIURL=`https://api.openweathermap.org/data/2.5/weather?q=${SEARCH_CITY}&units=metric&appid=${this.apiKey}`;fetch(SEARCH_APIURL).then(response=>{if(!response.ok)throw new Error("No weather found.");return response.json()}).then(data=>weather.displayWeather(data)).catch(error=>{console.error("Error fetching weather:",error)})}else"geolocation"in navigator?navigator.geolocation.getCurrentPosition((function(position){const latitude=position.coords.latitude,longitude=position.coords.longitude,APIURL=`https://api.openweathermap.org/data/2.5/weather?lat=${latitude}&lon=${longitude}&units=metric&appid=${weather.apiKey}`;fetch(APIURL).then(response=>{if(!response.ok)throw new Error("No weather found.");return response.json()}).then(data=>weather.displayWeather(data)).catch(error=>{console.error("Error fetching weather:",error)})})):console.error("Geolocation is not supported by your browser."),fetch("https://api.geoapify.com/v1/ipinfo?apiKey=b08107a3a937447884493a9009335655").then(response=>response.json()).then(data=>{const CITY=data.city.name,APIURL=`https://api.openweathermap.org/data/2.5/weather?q=${CITY}&units=metric&appid=${this.apiKey}`;return fetch(APIURL)}).then(response=>{if(!response.ok)throw alert("No weather found."),new Error("No weather found.");return response.json()}).then(data=>this.displayWeather(data)).catch(error=>{console.error("Error fetching weather:",error)})},displayWeather:function(data){const{name:name}=data,{icon:icon,description:description}=data.weather[0],{temp:temp,humidity:humidity,temp_min:temp_min,temp_max:temp_max}=data.main,{speed:speed}=data.wind,{sunrise:sunrise,sunset:sunset}=data.sys,{country:country}=data.sys,FORMATTED_SUNRISE_TIME=new Date(1e3*sunrise).toLocaleTimeString("en-AU",{hour:"numeric",minute:"2-digit"}),FORMATTED_SUNSET_TIME=new Date(1e3*sunset).toLocaleTimeString("en-AU",{hour:"numeric",minute:"2-digit"});document.querySelector(".weather_city").innerText="Weather in "+name+", "+country,document.querySelector(".icon").src="https://openweathermap.org/img/wn/"+icon+".png",document.querySelector(".weather_overview-description").innerText=description,document.querySelector(".weather_overview-temp").innerText=Math.round(temp)+"°C",document.querySelector(".weather_range-tempMin").innerText=Math.round(temp_min)+" °C",document.querySelector(".weather_range-tempMax").innerText=Math.round(temp_max)+" °C",document.querySelector(".weather_humidity").innerText="Humidity: "+humidity+"%",document.querySelector(".weather_wind").innerText="Wind: "+speed+" km/h",document.querySelector(".weather_sunrise").innerText="Sunrise: "+FORMATTED_SUNRISE_TIME,document.querySelector(".weather_sunset").innerText="Sunset: "+FORMATTED_SUNSET_TIME,document.querySelector(".weather").classList.remove("loading"),document.querySelector(".searchBar").value="",document.body.style.backgroundImage="url('https://source.unsplash.com/1600x900/?landscape+')"},search:function(){this.fetchWeather(document.querySelector(".searchBar").value)}};document.querySelector(".search button").addEventListener("click",(function(){weather.search()})),document.querySelector(".searchBar").addEventListener("keyup",(function(event){"Enter"==event.key&&weather.search()})),weather.fetchWeather();